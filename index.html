<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foldproof - 3D Print Fold Preview | Brochure & Flyer Layout Visualizer</title>
    <meta name="description" content="Preview print layouts in 3D with Foldproof. Upload front and back designs, choose bi-fold, tri-fold, or gate fold styles, and see an interactive 3D preview before printing. Supports PDF, images, custom sizes, bleed guides, and export to JPG, PNG, or PDF.">
    <meta name="keywords" content="print preview, brochure fold, tri-fold, bi-fold, gate fold, 3D print layout, flyer design, PDF preview, print design tool">
    <meta name="author" content="Foldproof">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://tyler-fulk.github.io/Foldproof/">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Foldproof - 3D Print Fold Preview">
    <meta property="og:description" content="Preview brochure and flyer layouts in interactive 3D. Upload designs, choose fold types, and export before printing. Free web-based print preview tool.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tyler-fulk.github.io/Foldproof/">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Foldproof - 3D Print Fold Preview">
    <meta name="twitter:description" content="Preview brochure and flyer layouts in interactive 3D. Upload designs, choose fold types, and export before printing.">
    
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Foldproof",
        "description": "Free web-based 3D print fold preview tool. Upload front and back designs, visualize bi-fold, tri-fold, and gate fold layouts in an interactive 3D viewport, then export to JPG, PNG, or PDF before printing.",
        "url": "https://tyler-fulk.github.io/Foldproof/",
        "applicationCategory": "DesignApplication",
        "operatingSystem": "Any",
        "browserRequirements": "Requires JavaScript. Supports Chrome, Firefox, Safari, Edge.",
        "featureList": [
            "Upload front and back images (PNG, JPG, WebP, PDF)",
            "Preset and custom paper sizes with fractional inch support",
            "Bi-fold, tri-fold Z-fold, tri-fold roll, and gate fold styles",
            "Vertical and horizontal orientation for all fold types",
            "Interactive 3D viewport with orbit controls",
            "Animated fold/unfold preview with adjustable speed",
            "Print guides: trim line, bleed area, safe zone, fold lines",
            "Ruler with measurement labels",
            "Export viewport to JPG, PNG (transparent), or PDF",
            "Light and dark mode"
        ]
    }
    </script>
    
    <script>
        // Prevent flash of light mode on startup
        (function() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                document.documentElement.setAttribute('data-theme', 'dark');
            } else {
                document.documentElement.setAttribute('data-theme', 'light');
            }
        })();
    </script>
</head>
<body>
    <noscript>
        <div style="padding: 20px; text-align: center; background: #fef3c7; color: #92400e;">
            Foldproof requires JavaScript to run. Please enable JavaScript in your browser to preview 3D print fold layouts.
        </div>
    </noscript>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>Foldproof</h1>
                <button id="theme-toggle" class="icon-btn" title="Toggle Dark/Light Mode">
                    <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></svg>
                    <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                </button>
            </div>

            <!-- Image Upload Section -->
            <section class="panel">
                <h2>Upload Images</h2>
                
                <div class="upload-group">
                    <label>Front Side</label>
                    <div class="upload-zone" id="front-upload-zone" data-side="front">
                        <input type="file" id="front-image" accept="image/*,.pdf" hidden>
                        <div class="upload-placeholder">
                            <span class="upload-icon">ðŸ“„</span>
                            <span class="upload-text">Drop front image or PDF<br>or click to browse</span>
                        </div>
                        <div class="upload-preview" hidden>
                            <img id="front-preview" alt="Front preview">
                            <div class="page-selector-wrap" id="front-page-selector" hidden></div>
                            <button type="button" class="remove-btn" data-side="front" title="Remove" onclick="event.stopPropagation(); window.removeUploadedImage('front');">Ã—</button>
                        </div>
                    </div>
                </div>

                <div class="upload-zones-gap">
                    <label class="upload-label">Back Side</label>
                    <div class="swap-images-wrap">
                        <button type="button" id="swap-images-btn" class="swap-images-btn" title="Swap front and back">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M7 15l5 5 5-5M7 9l5-5 5 5"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="upload-group">
                    <div class="upload-zone" id="back-upload-zone" data-side="back">
                        <input type="file" id="back-image" accept="image/*,.pdf" hidden>
                        <div class="upload-placeholder">
                            <span class="upload-icon">ðŸ“„</span>
                            <span class="upload-text">Drop back image or PDF<br>or click to browse</span>
                        </div>
                        <div class="upload-preview" hidden>
                            <img id="back-preview" alt="Back preview">
                            <div class="page-selector-wrap" id="back-page-selector" hidden></div>
                            <button type="button" class="remove-btn" data-side="back" title="Remove" onclick="event.stopPropagation(); window.removeUploadedImage('back');">Ã—</button>
                        </div>
                    </div>
                </div>

                <label class="toggle-item" style="margin-top: 12px;">
                    <input type="checkbox" id="autofit-image">
                    <span class="toggle-label">Autofit image</span>
                    <span class="autofit-tooltip-wrap" id="autofit-tooltip-trigger">
                        <span class="autofit-tooltip">?</span>
                        <span class="autofit-tooltip-box" id="autofit-tooltip-box"><strong>Enabled:</strong> Paper size uses your preset or custom dimensions.<br><br><strong>Disabled:</strong> Paper size is taken from the uploaded file (e.g. a 1â€³Ã—1â€³ PDF displays at 1â€³Ã—1â€³).</span>
                    </span>
                </label>

                <div class="reflect-toggles" style="margin-top: 8px;">
                    <label class="toggle-item">
                        <input type="checkbox" id="reflect-front">
                        <span class="toggle-label">Reflect front</span>
                    </label>
                    <label class="toggle-item">
                        <input type="checkbox" id="reflect-back">
                        <span class="toggle-label">Reflect back</span>
                    </label>
                </div>
            </section>

            <!-- Size Selection Section -->
            <section class="panel">
                <h2>Paper Size</h2>
                
                <div class="form-group">
                    <label for="size-preset">Preset Sizes</label>
                    <select id="size-preset">
                        <option value="letter">8.5" Ã— 11" (Letter)</option>
                        <option value="legal">8.5" Ã— 14" (Legal)</option>
                        <option value="tabloid">11" Ã— 17" (Tabloid)</option>
                        <option value="a4">210mm Ã— 297mm (A4)</option>
                        <option value="a3">297mm Ã— 420mm (A3)</option>
                        <option value="custom">Custom Size...</option>
                    </select>
                </div>

                <div class="form-row custom-size-inputs" id="custom-size-section" hidden>
                    <div class="form-group">
                        <label for="custom-width">Width</label>
                        <input type="text" id="custom-width" placeholder='e.g., 16 5/16"'>
                    </div>
                    <div class="form-group">
                        <label for="custom-height">Height</label>
                        <input type="text" id="custom-height" placeholder='e.g., 8 7/16"'>
                    </div>
                    <button id="apply-custom-size" class="btn btn-secondary">Apply</button>
                </div>

                <div class="size-display">
                    <span id="current-size">8.5" Ã— 11"</span>
                </div>
            </section>

            <!-- Fold Type Section -->
            <section class="panel">
                <h2>Fold Type</h2>
                
                <div class="form-group">
                    <label for="fold-type">Fold Style</label>
                    <select id="fold-type">
                        <option value="bi-fold">Bi-Fold</option>
                        <option value="tri-fold-z">Tri-Fold Z-Fold (Accordion)</option>
                        <option value="tri-fold-roll">Tri-Fold Roll (Letter)</option>
                        <option value="gate-fold">Gate Fold</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="fold-orientation">Orientation</label>
                    <select id="fold-orientation">
                        <option value="vertical">Vertical (Left-Right fold)</option>
                        <option value="horizontal">Horizontal (Top-Bottom fold)</option>
                    </select>
                </div>
            </section>

            <!-- Guides Section -->
            <section class="panel">
                <h2>Guides</h2>
                
                <div class="guide-toggles">
                    <label class="toggle-item">
                        <input type="checkbox" id="guide-trim" checked>
                        <span class="toggle-label">
                            <span class="guide-color trim"></span>
                            Trim Line
                        </span>
                    </label>
                    
                    <label class="toggle-item">
                        <input type="checkbox" id="guide-bleed">
                        <span class="toggle-label">
                            <span class="guide-color bleed"></span>
                            Bleed Area
                        </span>
                    </label>
                    
                    <div class="toggle-submenu" id="bleed-submenu" hidden>
                        <div class="sub-item slider-row">
                            <label for="bleed-margin"><span id="bleed-value">0.125</span>"</label>
                            <input type="range" id="bleed-margin" min="0" max="0.5" step="0.01" value="0.125">
                        </div>
                    </div>
                    
                    <label class="toggle-item">
                        <input type="checkbox" id="guide-safe">
                        <span class="toggle-label">
                            <span class="guide-color safe"></span>
                            Safe Zone
                        </span>
                    </label>
                    
                    <div class="toggle-submenu" id="safe-submenu" hidden>
                        <div class="sub-item slider-row">
                            <label for="safe-margin"><span id="safe-value">0.25</span>"</label>
                            <input type="range" id="safe-margin" min="0" max="1" step="0.01" value="0.25">
                        </div>
                    </div>
                    
                    <label class="toggle-item">
                        <input type="checkbox" id="guide-folds" checked>
                        <span class="toggle-label">
                            <span class="guide-color folds"></span>
                            Fold Lines
                        </span>
                    </label>
                    
                    <label class="toggle-item">
                        <input type="checkbox" id="guide-ruler">
                        <span class="toggle-label">
                            <span class="guide-color ruler"></span>
                            Ruler
                        </span>
                    </label>
                    
                    <div class="toggle-submenu" id="ruler-submenu" hidden>
                        <label class="toggle-item sub-item">
                            <input type="checkbox" id="guide-ruler-labels" checked>
                            <span class="toggle-label">
                                Show Measurements
                            </span>
                        </label>
                    </div>
                    
                    <label class="toggle-item">
                        <input type="checkbox" id="guide-grid" checked>
                        <span class="toggle-label">
                            <span class="guide-color grid"></span>
                            Grid
                        </span>
                    </label>
                </div>
            </section>

            <section class="panel about-panel" id="about-panel">
                <button type="button" class="about-toggle" id="about-toggle" aria-expanded="false">
                    <h2>About</h2>
                    <span class="about-chevron">â–¾</span>
                </button>
                <div class="about-content" id="about-content" hidden>
                    <p class="about-intro">Foldproof lets you preview print layouts in 3D before sending to the printer.</p>
                    <ul class="about-features">
                        <li><strong>Upload designs</strong> â€” Front and back images or PDFs (PNG, JPG, WebP, SVG)</li>
                        <li><strong>Paper sizes</strong> â€” Letter, Legal, Tabloid, A4, A3, or custom dimensions</li>
                        <li><strong>Fold types</strong> â€” Bi-fold, tri-fold (Z-fold or roll), gate fold</li>
                        <li><strong>3D preview</strong> â€” Rotate, zoom, and animate fold/unfold</li>
                        <li><strong>Print guides</strong> â€” Trim, bleed, safe zone, fold lines, ruler</li>
                        <li><strong>Export</strong> â€” Save viewport as JPG, PNG (transparent), or PDF</li>
                    </ul>
                </div>
            </section>

            <section class="panel donation-panel">
                <a href="https://ko-fi.com/tylerfulk" target="_blank" class="kofi-button">
                    <span class="kofi-icon">â˜•</span>
                    <span>Saved a reprint? Support the app.</span>
                </a>
                <p class="made-by">Made by <a href="https://tylerfulk.com" target="_blank" rel="noopener">Tyler Fulk</a></p>
            </section>
        </aside>

        <!-- Main Viewport -->
        <main class="viewport">
            <div class="viewport-container">
                <canvas id="three-canvas"></canvas>
                <div class="fold-type-toolbar" id="fold-type-toolbar">
                    <button type="button" class="fold-type-btn" data-fold="bi-fold" title="Bi-Fold">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="10" height="16" rx="1"/><rect x="12" y="4" width="10" height="16" rx="1"/></svg>
                    </button>
                    <button type="button" class="fold-type-btn" data-fold="tri-fold-z" title="Tri-Fold Z-Fold (Accordion)">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="6" height="16" rx="1"/><rect x="9" y="4" width="6" height="16" rx="1"/><rect x="16" y="4" width="6" height="16" rx="1"/></svg>
                    </button>
                    <button type="button" class="fold-type-btn" data-fold="tri-fold-roll" title="Tri-Fold Roll (Letter)">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="7" height="16" rx="1"/><rect x="9" y="4" width="6" height="16" rx="1"/><rect x="15" y="4" width="7" height="16" rx="1"/></svg>
                    </button>
                    <button type="button" class="fold-type-btn" data-fold="gate-fold" title="Gate Fold">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="6" height="16" rx="1"/><rect x="8" y="4" width="8" height="16" rx="1"/><rect x="16" y="4" width="6" height="16" rx="1"/></svg>
                    </button>
                </div>
                <div class="viewport-overlay" id="viewport-overlay">
                    <div class="viewport-overlay-content">
                        <span>Upload front and back images to preview</span>
                        <span class="viewport-overlay-hint">3D print fold preview â€” brochures, flyers, business cards</span>
                    </div>
                </div>
                
                <div class="export-toolbar">
                    <button type="button" id="export-btn" class="export-btn" title="Export viewport">Export</button>
                    <div class="export-dropdown" id="export-dropdown" hidden>
                        <div class="export-option">
                            <label>Format</label>
                            <select id="export-format">
                                <option value="jpg">JPG</option>
                                <option value="png">PNG (transparent)</option>
                                <option value="pdf">PDF</option>
                            </select>
                        </div>
                        <div class="export-option">
                            <label class="toggle-item">
                                <input type="checkbox" id="export-background" checked>
                                <span class="toggle-label">Show background</span>
                            </label>
                        </div>
                        <div class="export-option">
                            <label class="toggle-item">
                                <input type="checkbox" id="export-grid" checked>
                                <span class="toggle-label">Show grid</span>
                            </label>
                        </div>
                        <div class="export-option">
                            <label class="toggle-item">
                                <input type="checkbox" id="export-guides" checked>
                                <span class="toggle-label">Show guides & rulers</span>
                            </label>
                        </div>
                        <button type="button" id="export-apply" class="btn btn-primary">Export</button>
                    </div>
                </div>
            </div>

            <!-- Animation Controls -->
            <div class="controls-bar-wrapper">
                <div class="controls-bar controls-disabled" id="controls-bar">
                    <div class="controls-left">
                    <button id="btn-unfold" class="btn btn-primary" title="Unfold">
                        <svg class="control-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
                        <span>Unfold</span>
                    </button>
                    <button id="btn-fold" class="btn btn-primary" title="Fold">
                        <svg class="control-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>
                        <span>Fold</span>
                    </button>
                    <button id="btn-play-pause" class="btn btn-secondary btn-play-pause" title="Play/Pause Animation">
                        <span id="play-icon">
                            <svg class="control-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M9 6v12l9-6z" transform="translate(-1, 0)"/></svg>
                        </span>
                        <span id="pause-icon" hidden>
                            <svg class="control-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="5" width="4" height="14" rx="1"/><rect x="14" y="5" width="4" height="14" rx="1"/></svg>
                        </span>
                    </button>
                </div>

                <div class="controls-center">
                    <label for="fold-progress">Fold Progress</label>
                    <input type="range" id="fold-progress" min="-100" max="100" value="0">
                    <span id="fold-progress-label">0%</span>
                </div>

                <div class="controls-right">
                    <label for="animation-speed">Speed</label>
                    <input type="range" id="animation-speed" min="0.1" max="3" step="0.1" value="1">
                    <span id="speed-label">1x</span>
                </div>
                </div>
                <div class="controls-bar-overlay" id="controls-bar-overlay" aria-hidden="true"></div>
            </div>
        </main>
    </div>

    <!-- PDF.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.0.379/pdf.min.mjs" type="module"></script>
    
    <!-- Import Map for ES Modules -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/",
            "pdfjs-dist": "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.0.379/pdf.min.mjs",
            "jspdf": "https://esm.sh/jspdf@2.5.1"
        }
    }
    </script>
    
    <!-- Application Scripts -->
    <script type="module" src="js/main.js"></script>
</body>
</html>
